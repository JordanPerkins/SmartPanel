{{ include('header.html.twig', { 'page_title': page_title, 'page_id': 5, 'link': settings.clientarea_link }) }}
<div id="page-content-wrapper">
    <div id="page-content">

            <div class="container">


            <!-- Data tables -->

            <!--<link rel="stylesheet" type="text/css" href="../../assets/widgets/datatable/datatable.css">-->
            <script type="text/javascript" src="../../assets/widgets/datatable/datatable.js"></script>
            <script type="text/javascript" src="../../assets/widgets/datatable/datatable-bootstrap.js"></script>
            <script type="text/javascript" src="../../assets/widgets/datatable/datatable-tabletools.js"></script>

            <script type="text/javascript">

                /* Datatables basic */

                $(document).ready(function() {
                    $('#datatable-example').dataTable();
                });

                /* Datatables hide columns */

                $(document).ready(function() {
                    var table = $('#datatable-hide-columns').DataTable( {
                        "scrollY": "300px",
                        "paging": false
                    } );

                    $('#datatable-hide-columns_filter').hide();

                    $('a.toggle-vis').on( 'click', function (e) {
                        e.preventDefault();

                        // Get the column API object
                        var column = table.column( $(this).attr('data-column') );

                        // Toggle the visibility
                        column.visible( ! column.visible() );
                    } );
                } );

                /* Datatable row highlight */

                $(document).ready(function() {
                    var table = $('#datatable-row-highlight').DataTable();

                    $('#datatable-row-highlight tbody').on( 'click', 'tr', function () {
                        $(this).toggleClass('tr-selected');
                    } );
                });



                $(document).ready(function() {
                    $('.dataTables_filter input').attr("placeholder", "Search...");
                });

            </script>


<div id="page-title">
<h2>Event Log</h2>
<p>Your latest account actions.</p>

</div>

<div class="panel">
<div class="panel-body">
<h3 class="title-hero">
Logs
</h3>
<div class="example-box-wrapper">
{% if events is empty %}
There are no events to show.
{% else %}
<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" id="datatable-example">
<thead>
<tr>
<th>Date/Time</th>
<th>Service</th>
<th>IP</th>
<th>Action</th>
<th>Value</th>
<th>Result</th>
</tr>
</thead>

<tfoot>
<tr>
<th>Date/Time</th>
<th>Service</th>
<th>IP</th>
<th>Action</th>
<th>Value</th>
<th>Result</th>
</tr>
</tfoot>
<tbody>
{% for event in events %}
<tr>
  <td>{{ event.datetime|date("d/m/Y H:i:s") }}</td>
  <td>{% if event.service == 0 %} n/a {%else%} <a href="/servers/{{ event.service }}">#{{ event.service }}</a> {%endif%}</td>
  <td>{{ event.ip }}</td>
  <td>
  {% if event.action == "login" %}
  User Login
  {% elseif event.action == "boot" %}
  Start VM
  {% elseif event.action == "shutdown" %}
  Stop VM
  {% elseif event.action == "restart" %}
  Reboot VM
  {% elseif event.action == "password" %}
  Set VM Root Password
  {% elseif event.action == "reinstall" %}
  Reinstall OS
  {% elseif event.action == "hostname" %}
  Set VM Hostname
  {% elseif event.action == "tuntap_enable" or event.action == "tuntap_disable"  %}
  Toggle TUN/TAP
  {% elseif event.action == "fuse_enable" or event.action == "fuse_disable"  %}
  Toggle FUSE
  {%endif %}


  </td>
  <td>
  {% if event.action == "reinstall" %}
  {% for template in templates %}
  {% if template.file == event.value %}
  {{ template.name }}
  {% endif %}
    {% endfor %}
  {% else %}
  {{ event.value }}
  {% endif %}</td>
  <td>{% if event.result %} Success {%else%} Failed {%endif%}</td>
</tr>
{% endfor %}
</tbody>
</table>
{% endif %}
</div>
</div>
</div>
</div>

{{ include('footer.html.twig') }}
